<div class="row justify-content-center align-items-center h-100">
    <div class="col-10">
        <h5>Participantes do Programa</h5>
        <div class="card">            
            <div class="card-body">                
                <table class="table table-borderless table-hover">
                    <thead>
                        <tr>
                            <th scope="col">#</th>
                            <th scope="col"></th>
                            <th scope="col">NOME</th>
                            <th scope="col">INDICAÇÕES</th>
                            <th scope="col">MILESTONES</th>
                            <th scope="col">CLIQUES/COMP.</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr scope="row" *ngFor="let participante of participantes; let i = index" (click)="PreencheDadoPopover(i)" 
                            [popoverOnHover]="false" [popover]="detalhesPopover" popoverPlacement="right">
                            <td class="align-middle id-participante">{{i}}</td>
                            <td class="align-middle"><img src="{{participante.customer_picture}}"></td>
                            <td class="align-middle">                                    
                                {{participante.customer_name}}
                                <br/>  
                                <span class="data-participante">{{participante.created_at | date:"dd/MM/yyyy HH:mm":"UTC"}}</span>                                                                  
                            </td>
                            <td class="align-middle"><h4><span class="badge alert-success">{{participante.referral_confirmed}}/{{participante.referral_pending}}</span></h4></td>
                            <td class="align-middle"><h4><span class="badge alert-info">{{participante.reward_redeemed}}/{{participante.reward_pending}}</span></h4></td>
                            <td class="align-middle"><h4><span class="badge alert-warning">{{participante.total_link_click}}/{{participante.total_shares}}</span></h4></td>
                        </tr>
                    </tbody>
                </table>

                <popover-content #detalhesPopover   
                    placement = "auto"                              
                    [closeOnClickOutside]="true"
                    [closeOnMouseOutside]="false">        
                    
                    <div *ngIf="participante == null; then popoverVazio else popoverPreenchido"></div> 

                    <ng-template #popoverVazio>
                        Não há dados para mostrar
                    </ng-template>

                    <ng-template #popoverPreenchido>                        
                        <app-detalhes-participantes [participante]="participante" [idParticipante]="idParticipante"></app-detalhes-participantes>
                    </ng-template>                                        
                </popover-content>
            </div>
        </div>     
    </div>
</div>
